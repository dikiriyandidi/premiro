function initMap(){var e={lat:mapLat,lng:mapLon},a=new google.maps.Map(document.getElementById(mapId),{zoom:14,center:e,scrollwheel:!1});new google.maps.Marker({position:e,map:a})}function inArray(e,a){for(var t=a.length,n=0;n<t;n++)if(a[n]==e)return!0;return!1}$.ajaxSetup({cache:!1});var base_path=window.location.protocol+"//"+window.location.host,index=function(e,a){return e[a]},isMap=0,mapLon=0,mapLat=0,mapId="",readyCallback=function(){$(".select2").select2(),$(".datetimepicker").datetimepicker({format:"DD/MM/YYYY HH:mm",icons:{time:"fa fa-clock-o",date:"fa fa-calendar",up:"fa fa-chevron-up",down:"fa fa-chevron-down",previous:"fa fa-chevron-left",next:"fa fa-chevron-right",today:"fa fa-crosshairs",clear:"fa fa-trash"}}),$(".wysiwyg").each(function(){var e=($(this),$(document).find('[data-target="#'+$(this).attr("id")+'"]'));$(this).wysiwyg({toolbarSelector:"[data-role="+e.attr("data-role")+"]"}),$(this).wysiwyg().on("blur",function(){var e=$(this)[0],a=$(e).attr("data-copyto");$(a).val($(e).html())})}),isMap&&initMap()};$.renderData=function(e){var a=void 0===e.targetParent?"":0,t=e.getURL,n=e.setData;$.when($.getData(t)).done(function(e){$.apiDataCallback(e,n,a)})};var arrJsonData=function(e,a,t,n){if(t){for(x in e)if(e[x][a]==t)return e[x][n]}else for(x in e)return e[x][a]};$.apiDataCallback=function(e,a,t){var n,r,o;for(k in a){n=a[k],dataJsonType=n.jsonType,r=n.target,o=n.notation,dataKey=n.key,dataName=n.name,dataNeeded=n.needed,void 0===n.type?dataType="val":dataType=n.type;var i=e;if("array"==dataJsonType)var s=arrJsonData(i[o],dataKey,dataName,dataNeeded);else var s=o.split(".").reduce(index,i);if("val"===dataType)0==t?$(r).val(s):$(t).find(r).val(s);else if("append"===dataType)0==t?$(r).append(s):$(t).find(r).append(s);else if("multiselect"===dataType)$.each(s.split(","),function(e,a){0==t?$(r+" option[value='"+a+"']").prop("selected",!0):$(t).find(r+" option[value='"+a+"']").prop("selected",!0)});else if("image"===dataType)0==t?($(r).css("background-image","url("+s+")"),$(r).attr("href",s)):$(t).find(r).css("background-image","url("+s+")");else if("map"===dataType)isMap=1,mapId="map",mapLon=parseFloat(s.lon),mapLat=parseFloat(s.lat);else if("valid"===dataType){var d;d=s?'<span class="text-success">✓</span>':'<span class="text-danger">✗</span>',0==t?$(r).append(d):$(t).find(r).append(d)}else if("list_image"===dataType){var u="";for(x in s){var c=s[x];u+='<li style="background-image: url('+c.img+')">'+c.name+"</li>"}0==t?$(r).append(u):$(t).find(r).append(u)}else if("status"===dataType){var l,p;l=s.text,0==parseInt(s.code)?p="label-inverse":1==parseInt(s.code)&&(p="label-success"),0==t?$(r).addClass(p).append(l):$(t).find(r).attr("class",p).append(l)}}readyCallback()},$.getData=function(e,a,t,n){return $.ajax({type:"GET",url:e,processData:!1,contentType:!1,dataType:"json",beforeSend:function(){$.onLoading()},success:function(e){$.hideLoading()},error:function(e){$.hideLoading(),$.modal("#ajaxModal","Sorry..","There's problem in processing your request, please contact your administrator")}})},$.currencyFormat=function(e){return e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")},$.onLoading=function(e){$(".overlayall").fadeIn(),$(".loading").fadeIn()},$.hideLoading=function(){$(".overlayall").fadeOut(),$(".loading").fadeOut()},$.info=function(e,a,t,n){t=void 0!=t?t:"Information",$.modal("#ajaxModal",t,e),$("#ajaxModal div.close").click(function(e){e.preventDefault(),void 0!=a&&"function"==typeof a&&a(),n&&$.redirect(n),$("#ajaxModal").fadeOut()})},$.confirm=function(e,a,t,n,r){n=void 0!=n?n:"Confirmation",$.modal("#ajaxModal",n,e,null,null,1),$("#ajaxModal div.close").click(function(){void 0!=t&&"function"==typeof t&&t(),$("#ajaxModal").fadeOut()}),$("#ajaxModal .btnConfirmOk").click(function(){void 0!=a&&"function"==typeof a&&a(),$("#ajaxModal").fadeOut()})},$.prompt=function(e,a){return prompt(e)},$.resetParsley=function(){$("form.parsley-validate").each(function(){void 0!=$(this).parsley()&&$(this).parsley().reset()})},$.clearForm=function(e){$(e).find("input[type=number]").val(""),$(e).find("input[type=text]").val(""),$(e).find("input[type=file]").val(""),$(e).find("input[type=password]").val(""),$(e).find("textarea").val(""),$(e).find("select option").removeAttr("selected"),$(e).find("select").val("").trigger("change"),$(e).find("input[type=checkbox]").removeAttr("checked"),$(e).find("input[type=radio]").removeAttr("checked"),$(e).find("input[type=radio]").removeAttr("selected"),$(e).find(".tinymce").each(function(){var e=$(this).attr("id"),a=tinymce.get(e);if(void 0!=a){a.setContent("")}}),$(e).find(".tagitcontrol").each(function(){$.isFunction($.fn.tagit)&&$(this).tagit("removeAll")})},$.postData=function(formData,url,done,error,form,redir_url){$.ajax({type:"POST",url:url,data:formData,processData:!1,contentType:!1,dataType:"json",beforeSend:function(){$.onLoading()},success:function(response){if($.hideLoading(),void 0==response.error.errors){var ok=function(){void 0!=done&&""!=done&&("function"==typeof done?done(response):eval(done)),void 0!=form&&(void 0!=$(form).attr("clearform")&&$.clearForm(form),$.resetParsley())};if(void 0==done||""==done){var title="";void 0!=response.data.popup_title&&""!=response.data.popup_title&&(title=response.data.popup_title),void 0!=response.data.message&&""!=response.data.message&&$.info(response.data.message,ok,title,redir_url)}else ok()}else if(void 0!=error&&""!=error)"function"==typeof error?error(response):eval(error);else{var message="";for(var i in response.error.errors){var obj=response.error.errors[i];""!=message&&(message+="<br/>"),message+=obj.message}void 0!=response.data.title?$.modal("#ajaxModal",response.data.title,message):$.modal("#ajaxModal",null,message)}},error:function(e){$.hideLoading(),$.modal("#ajaxModal","Sorry..","There's problem in processing your request, please contact your administrator")}})},$.postAjax=function(e,a,t,n){var r=new FormData;$.each(a,function(e,a){r.append(e,a)}),$.postData(r,e,t,n)},$.back=function(){window.history.length>0?window.history.go(-1):$.redirect("")},$.redirect=function(e){window.location.href=base_path+e},$.validateForm=function(e){$.removeError();var a=0,t=0,n=$(e).find("input[required]");if($(n).each(function(){var e=$(this);""===e.val()||null===e.val()?($.addError("Please fill in the form."),a+=1):t+=1}),a)return!1;var r=$(e).find("input[data-role=email]");if($(r).each(function(){var e=$(this);e.val().match(/^([a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+(\.[a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)*|"((([ \t]*\r\n)?[ \t]+)?([\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*(([ \t]*\r\n)?[ \t]+)?")@(([a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.)+([a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.?$/i)?t+=1:($.addError("Please enter a valid email address."),a+=1)}),a)return!1;var o=$(e).find("input[type=checkbox][required]");if($(o).each(function(){var e=$(this);e.is(":checked")?t+=1:("agreement"==e.attr("data-role")?$.addError("You must agree to the Terms & Conditions."):$.addError("Please fill in the form."),a+=1)}),a)return!1;var i=$(e).find("input[data-role=password].password-requirements");if($(i).each(function(){var e=$(this),n=new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{9,})");e.val().match(n)?t+=1:($.addError("Password does not meet requirements."),a+=1)}),a)return!1;var s=$(e).find("input[data-role=password]");return $(s).each(function(){var e=$(this);if(e.attr("data-match-id")){var n=$("#"+e.attr("data-match-id"));e.val()!==$(n).val()?($.addError("Password does not match."),a+=1):t+=1}}),!a},$.addError=function(e){$(".err-msg").html(e),$(".err-msg").removeClass("hide"),$(".err-msg").addClass("show")},$.removeError=function(){$(".err-msg").html(""),$(".err-msg").removeClass("show"),$(".err-msg").addClass("hide")},$.closeModal=function(){$(".modal").modal("hide")},$(document).ready(function(){$.resetParsley(),$(".back").click(function(e){e.preventDefault(),$.back()}),$('[data-toggle="modal"]').on("click",function(){var e=$(this).attr("href"),a=$($(this).attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,""));$.clearForm($(a).find("form")),$.resetParsley()}),$(document).on("submit","form.ajax",function(e){e.preventDefault();var a=$(this),t=$(this).serialize(),n=t.split("&"),r=new FormData,o={};if(!$.validateForm($(this)))return!1;if("true"!=$(this).attr("prevent")){for(var i=0;i<n.length;i++){var s=n[i].split("="),d=s[1],u=$(this).find("input[name='"+unescape(s[0])+"']").attr("type"),c=["checkbox","radio"];if(void 0==$(this).find("input[name='"+unescape(s[0])+"']").val()||void 0===u||!1===u||inArray(u,c)||(d=$(this).find("input[name="+s[0]+"]").val()),void 0!=$(this).find("select[name='"+unescape(s[0])+"']").attr("multiple"))if("[object Array]"===Object.prototype.toString.call(o[unescape(s[0])]))o[unescape(s[0])].push(unescape(d));else{var l=o[unescape(s[0])];o[unescape(s[0])]=new Array,o[unescape(s[0])].push(unescape(d))}else if(void 0!=o[unescape(s[0])])if("[object Array]"===Object.prototype.toString.call(o[unescape(s[0])]))o[unescape(s[0])].push(unescape(d));else{var l=o[unescape(s[0])];o[unescape(s[0])]=new Array,o[unescape(s[0])].push(l),o[unescape(s[0])].push(unescape(d))}else o[unescape(s[0])]=unescape(d);$(this).find("input[name="+s[0]+"]").length>1&&"[object Array]"!==Object.prototype.toString.call(o[unescape(s[0])])&&void 0!==u&&!1!==u&&!inArray(u,["radio"])&&(o[unescape(s[0])]=new Array,o[unescape(s[0])].push(unescape(d)))}$(this).find("input[type=file]").each(function(){var e=$(this)[0].files,a=$(this).attr("name");void 0!=a&&""!=a&&(o[a]=e[0])}),$(this).find(".tinymce").each(function(){var e=$(this).attr("id"),a=tinymce.get(e);if(void 0!=a){var t=a.getContent();o[e]=t}}),$(this).find("textarea").each(function(){var e=$(this).val(),a=$(this).attr("name");o[a]=e});for(var p in o)if(o[p]instanceof Array)for(var i in o[p])r.append(p+"[]",o[p][i]);else r.append(p,o[p]);$.postData(r,$(a).attr("action"),$(a).attr("done"),$(a).attr("error"),a,$(a).attr("redir-url"))}}),$(".modal-footer .btn-primary").click(function(e){$(this).parent().parent().find("form").submit()}),$(".chosen-select").each(function(){$(this).chosen()}),$.modal=function(e,a,t,n,r,o){var i=$(e),s=$(e).find(".modal-item"),d=$(e).find(".close"),u=$(e).find(".modal-title"),c=$(e).find(".modal-content");$(".btnConfirmOk").remove(),"center"==r&&u.addClass("text-center"),a&&u.html(a),t&&c.html(t),o&&s.append('<button type="button" class="btnConfirmOk">OK</button>'),i.fadeIn(),$("body").addClass("noscroll"),d.on("click",function(e){i.fadeOut(),$("body").removeClass("noscroll")})}});