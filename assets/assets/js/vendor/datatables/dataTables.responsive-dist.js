!function(t){"function"==typeof define&&define.amd?define(["jquery","datatables.net"],function(e){return t(e,window,document)}):"object"==typeof exports?module.exports=function(e,n){return e||(e=window),n&&n.fn.dataTable||(n=require("datatables.net")(e,n).$),t(n,e,e.document)}:t(jQuery,window,document)}(function(t,e,n,i){"use strict";var o=t.fn.dataTable,r=function(e,n){if(!o.versionCheck||!o.versionCheck("1.10.3"))throw"DataTables Responsive requires DataTables 1.10.3 or newer";this.s={dt:new o.Api(e),columns:[],current:[]},this.s.dt.settings()[0].responsive||(n&&"string"==typeof n.details?n.details={type:n.details}:n&&n.details===!1?n.details={type:!1}:n&&n.details===!0&&(n.details={type:"inline"}),this.c=t.extend(!0,{},r.defaults,o.defaults.responsive,n),e.responsive=this,this._constructor())};t.extend(r.prototype,{_constructor:function(){var n=this,i=this.s.dt,r=i.settings()[0],s=t(e).width();i.settings()[0]._responsive=this,t(e).on("resize.dtr orientationchange.dtr",o.util.throttle(function(){var i=t(e).width();i!==s&&(n._resize(),s=i)})),r.oApi._fnCallbackReg(r,"aoRowCreatedCallback",function(e){-1!==t.inArray(!1,n.s.current)&&t(">td, >th",e).each(function(e){var o=i.column.index("toData",e);n.s.current[o]===!1&&t(this).css("display","none")})}),i.on("destroy.dtr",function(){i.off(".dtr"),t(i.table().body()).off(".dtr"),t(e).off("resize.dtr orientationchange.dtr"),t.each(n.s.current,function(t,e){e===!1&&n._setColumnVis(t,!0)})}),this.c.breakpoints.sort(function(t,e){return t.width<e.width?1:t.width>e.width?-1:0}),this._classLogic(),this._resizeAuto();var a=this.c.details;a.type!==!1&&(n._detailsInit(),i.on("column-visibility.dtr",function(){n._classLogic(),n._resizeAuto(),n._resize()}),i.on("draw.dtr",function(){n._redrawChildren()}),t(i.table().node()).addClass("dtr-"+a.type)),i.on("column-reorder.dtr",function(){n._classLogic(),n._resizeAuto(),n._resize()}),i.on("column-sizing.dtr",function(){n._resizeAuto(),n._resize()}),i.on("preXhr.dtr",function(){var t=[];i.rows().every(function(){this.child.isShown()&&t.push(this.id(!0))}),i.one("draw.dtr",function(){i.rows(t).every(function(){n._detailsDisplay(this,!1)})})}),i.on("init.dtr",function(){n._resizeAuto(),n._resize(),t.inArray(!1,n.s.current)&&i.columns.adjust()}),this._resize()},_columnsVisiblity:function(e){var n,i,o=this.s.dt,r=this.s.columns,s=r.map(function(t,e){return{columnIdx:e,priority:t.priority}}).sort(function(t,e){return t.priority!==e.priority?t.priority-e.priority:t.columnIdx-e.columnIdx}),a=t.map(r,function(n){return n.auto&&null===n.minWidth?!1:n.auto===!0?"-":-1!==t.inArray(e,n.includeIn)}),l=0;for(n=0,i=a.length;i>n;n++)a[n]===!0&&(l+=r[n].minWidth);var u=o.settings()[0].oScroll,c=u.sY||u.sX?u.iBarWidth:0,h=o.table().container().offsetWidth-c,d=h-l;for(n=0,i=a.length;i>n;n++)r[n].control&&(d-=r[n].minWidth);var p=!1;for(n=0,i=s.length;i>n;n++){var f=s[n].columnIdx;"-"===a[f]&&!r[f].control&&r[f].minWidth&&(p||d-r[f].minWidth<0?(p=!0,a[f]=!1):a[f]=!0,d-=r[f].minWidth)}var g=!1;for(n=0,i=r.length;i>n;n++)if(!r[n].control&&!r[n].never&&!a[n]){g=!0;break}for(n=0,i=r.length;i>n;n++)r[n].control&&(a[n]=g);return-1===t.inArray(!0,a)&&(a[0]=!0),a},_classLogic:function(){var e=this,n=this.c.breakpoints,o=this.s.dt,r=o.columns().eq(0).map(function(e){var n=this.column(e),r=n.header().className,s=o.settings()[0].aoColumns[e].responsivePriority;if(s===i){var a=t(n.header()).data("priority");s=a!==i?1*a:1e4}return{className:r,includeIn:[],auto:!1,control:!1,never:r.match(/\bnever\b/)?!0:!1,priority:s}}),s=function(e,n){var i=r[e].includeIn;-1===t.inArray(n,i)&&i.push(n)},a=function(t,i,o,a){var l,u,c;if(o){if("max-"===o)for(l=e._find(i).width,u=0,c=n.length;c>u;u++)n[u].width<=l&&s(t,n[u].name);else if("min-"===o)for(l=e._find(i).width,u=0,c=n.length;c>u;u++)n[u].width>=l&&s(t,n[u].name);else if("not-"===o)for(u=0,c=n.length;c>u;u++)-1===n[u].name.indexOf(a)&&s(t,n[u].name)}else r[t].includeIn.push(i)};r.each(function(e,i){for(var o=e.className.split(" "),r=!1,s=0,l=o.length;l>s;s++){var u=t.trim(o[s]);if("all"===u)return r=!0,void(e.includeIn=t.map(n,function(t){return t.name}));if("none"===u||e.never)return void(r=!0);if("control"===u)return r=!0,void(e.control=!0);t.each(n,function(t,e){var n=e.name.split("-"),o=new RegExp("(min\\-|max\\-|not\\-)?("+n[0]+")(\\-[_a-zA-Z0-9])?"),s=u.match(o);s&&(r=!0,s[2]===n[0]&&s[3]==="-"+n[1]?a(i,e.name,s[1],s[2]+s[3]):s[2]!==n[0]||s[3]||a(i,e.name,s[1],s[2]))})}r||(e.auto=!0)}),this.s.columns=r},_detailsDisplay:function(e,n){var i=this,o=this.s.dt,r=this.c.details;if(r&&r.type!==!1){var s=r.display(e,n,function(){return r.renderer(o,e[0],i._detailsObj(e[0]))});(s===!0||s===!1)&&t(o.table().node()).triggerHandler("responsive-display.dt",[o,e,s,n])}},_detailsInit:function(){var e=this,n=this.s.dt,i=this.c.details;"inline"===i.type&&(i.target="td:first-child, th:first-child"),n.on("draw.dtr",function(){e._tabIndexes()}),e._tabIndexes(),t(n.table().body()).on("keyup.dtr","td, th",function(e){13===e.keyCode&&t(this).data("dtr-keyboard")&&t(this).click()});var o=i.target,r="string"==typeof o?o:"td, th";t(n.table().body()).on("click.dtr mousedown.dtr mouseup.dtr",r,function(i){if(t(n.table().node()).hasClass("collapsed")&&-1!==t.inArray(t(this).closest("tr").get(0),n.rows().nodes().toArray())){if("number"==typeof o){var r=0>o?n.columns().eq(0).length+o:o;if(n.cell(this).index().column!==r)return}var s=n.row(t(this).closest("tr"));"click"===i.type?e._detailsDisplay(s,!1):"mousedown"===i.type?t(this).css("outline","none"):"mouseup"===i.type&&t(this).blur().css("outline","")}})},_detailsObj:function(e){var n=this,i=this.s.dt;return t.map(this.s.columns,function(t,o){return t.never||t.control?void 0:{title:i.settings()[0].aoColumns[o].sTitle,data:i.cell(e,o).render(n.c.orthogonal),hidden:i.column(o).visible()&&!n.s.current[o],columnIndex:o,rowIndex:e}})},_find:function(t){for(var e=this.c.breakpoints,n=0,i=e.length;i>n;n++)if(e[n].name===t)return e[n]},_redrawChildren:function(){var t=this,e=this.s.dt;e.rows({page:"current"}).iterator("row",function(n,i){e.row(i);t._detailsDisplay(e.row(i),!0)})},_resize:function(){var n,i,o=this,r=this.s.dt,s=t(e).width(),a=this.c.breakpoints,l=a[0].name,u=this.s.columns,c=this.s.current.slice();for(n=a.length-1;n>=0;n--)if(s<=a[n].width){l=a[n].name;break}var h=this._columnsVisiblity(l);this.s.current=h;var d=!1;for(n=0,i=u.length;i>n;n++)if(h[n]===!1&&!u[n].never&&!u[n].control){d=!0;break}t(r.table().node()).toggleClass("collapsed",d);var p=!1;r.columns().eq(0).each(function(t,e){h[e]!==c[e]&&(p=!0,o._setColumnVis(t,h[e]))}),p&&(this._redrawChildren(),t(r.table().node()).trigger("responsive-resize.dt",[r,this.s.current]))},_resizeAuto:function(){var e=this.s.dt,n=this.s.columns;if(this.c.auto&&-1!==t.inArray(!0,t.map(n,function(t){return t.auto}))){var i=(e.table().node().offsetWidth,e.columns,e.table().node().cloneNode(!1)),o=t(e.table().header().cloneNode(!1)).appendTo(i),r=t(e.table().body()).clone(!1,!1).empty().appendTo(i),s=e.columns().header().filter(function(t){return e.column(t).visible()}).to$().clone(!1).css("display","table-cell");t(r).append(t(e.rows({page:"current"}).nodes()).clone(!1)).find("th, td").css("display","");var a=e.table().footer();if(a){var l=t(a.cloneNode(!1)).appendTo(i),u=e.columns().footer().filter(function(t){return e.column(t).visible()}).to$().clone(!1).css("display","table-cell");t("<tr/>").append(u).appendTo(l)}t("<tr/>").append(s).appendTo(o),"inline"===this.c.details.type&&t(i).addClass("dtr-inline collapsed"),t(i).find("[name]").removeAttr("name");var c=t("<div/>").css({width:1,height:1,overflow:"hidden"}).append(i);c.insertBefore(e.table().node()),s.each(function(t){var i=e.column.index("fromVisible",t);n[i].minWidth=this.offsetWidth||0}),c.remove()}},_setColumnVis:function(e,n){var i=this.s.dt,o=n?"":"none";t(i.column(e).header()).css("display",o),t(i.column(e).footer()).css("display",o),i.column(e).nodes().to$().css("display",o)},_tabIndexes:function(){var e=this.s.dt,n=e.cells({page:"current"}).nodes().to$(),i=e.settings()[0],o=this.c.details.target;n.filter("[data-dtr-keyboard]").removeData("[data-dtr-keyboard]");var r="number"==typeof o?":eq("+o+")":o;"td:first-child, th:first-child"===r&&(r=">td:first-child, >th:first-child"),t(r,e.rows({page:"current"}).nodes()).attr("tabIndex",i.iTabIndex).data("dtr-keyboard",1)}}),r.breakpoints=[{name:"desktop",width:1/0},{name:"tablet-l",width:1024},{name:"tablet-p",width:768},{name:"mobile-l",width:480},{name:"mobile-p",width:320}],r.display={childRow:function(e,n,i){return n?t(e.node()).hasClass("parent")?(e.child(i(),"child").show(),!0):void 0:e.child.isShown()?(e.child(!1),t(e.node()).removeClass("parent"),!1):(e.child(i(),"child").show(),t(e.node()).addClass("parent"),!0)},childRowImmediate:function(e,n,i){return!n&&e.child.isShown()||!e.responsive.hasHidden()?(e.child(!1),t(e.node()).removeClass("parent"),!1):(e.child(i(),"child").show(),t(e.node()).addClass("parent"),!0)},modal:function(e){return function(i,o,r){if(o)t("div.dtr-modal-content").empty().append(r());else{var s=function(){a.remove(),t(n).off("keypress.dtr")},a=t('<div class="dtr-modal"/>').append(t('<div class="dtr-modal-display"/>').append(t('<div class="dtr-modal-content"/>').append(r())).append(t('<div class="dtr-modal-close">&times;</div>').click(function(){s()}))).append(t('<div class="dtr-modal-background"/>').click(function(){s()})).appendTo("body");t(n).on("keyup.dtr",function(t){27===t.keyCode&&(t.stopPropagation(),s())})}e&&e.header&&t("div.dtr-modal-content").prepend("<h2>"+e.header(i)+"</h2>")}}},r.renderer={listHidden:function(){return function(e,n,i){var o=t.map(i,function(t){return t.hidden?'<li data-dtr-index="'+t.columnIndex+'" data-dt-row="'+t.rowIndex+'" data-dt-column="'+t.columnIndex+'"><span class="dtr-title">'+t.title+'</span> <span class="dtr-data">'+t.data+"</span></li>":""}).join("");return o?t('<ul data-dtr-index="'+n+'" class="dtr-details"/>').append(o):!1}},tableAll:function(e){return e=t.extend({tableClass:""},e),function(n,i,o){var r=t.map(o,function(t){return'<tr data-dt-row="'+t.rowIndex+'" data-dt-column="'+t.columnIndex+'"><td>'+t.title+":</td> <td>"+t.data+"</td></tr>"}).join("");return t('<table class="'+e.tableClass+' dtr-details" width="100%"/>').append(r)}}},r.defaults={breakpoints:r.breakpoints,auto:!0,details:{display:r.display.childRow,renderer:r.renderer.listHidden(),target:0,type:"inline"},orthogonal:"display"};var s=t.fn.dataTable.Api;return s.register("responsive()",function(){return this}),s.register("responsive.index()",function(e){return e=t(e),{column:e.data("dtr-index"),row:e.parent().data("dtr-index")}}),s.register("responsive.rebuild()",function(){return this.iterator("table",function(t){t._responsive&&t._responsive._classLogic()})}),s.register("responsive.recalc()",function(){return this.iterator("table",function(t){t._responsive&&(t._responsive._resizeAuto(),t._responsive._resize())})}),s.register("responsive.hasHidden()",function(){var e=this.context[0];return e._responsive?-1!==t.inArray(!1,e._responsive.s.current):!1}),r.version="2.1.1",t.fn.dataTable.Responsive=r,t.fn.DataTable.Responsive=r,t(n).on("preInit.dt.dtr",function(e,n){if("dt"===e.namespace&&(t(n.nTable).hasClass("responsive")||t(n.nTable).hasClass("dt-responsive")||n.oInit.responsive||o.defaults.responsive)){var i=n.oInit.responsive;i!==!1&&new r(n,t.isPlainObject(i)?i:{})}}),r});
